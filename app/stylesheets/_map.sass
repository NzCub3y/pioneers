/*
  Pioneers - web game based on the Settlers of Catan board game.

  Copyright (C) 2009 Jakub Ku≈∫ma <qoobaa@gmail.com>

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as
  published by the Free Software Foundation, either version 3 of the
  License, or (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU Affero General Public License for more details.

  You should have received a copy of the GNU Affero General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.

!map_hex_width = 95px
!map_hex_height = 80px
!map_hex_x_offset = 15px
!map_hex_y_offset = 10px
!map_max_width = 7
!map_max_height = 7
!map_node_width = 24px
!map_node_height = 24px
!map_edge_width = 48px
!map_edge_height = 48px

=map
  div#board
    :overflow hidden
    :display block
    /:float left
    :position relative
    :padding 50px
    :background url("/images/map-background.png")
    @for !row from 1 to 11
      @for !col from 1 to 11
        &.size-#{!row + "-" + !col}
          :height= !row * 80px + !col * 40px - 40px
          :width= !col * 70px + 20px
    div.hexes
      :position absolute
      li
        :list-style none
        @for !row from 0 to 11
          &.row-#{!row}
            :position absolute
            :top= !row * 80px
        ul
          li
            :width 95px
            :height 80px
            :text-align center
            :line-height 80px
            span.robber
              :display none
            &.robber,&.settleable:hover
              span.roll
                :display none
              span.robber
                :display block
            span
              :width 95px
              :height 80px
              :display block
              :text-align center
              :font-weight bold
              :line-height 80px
            @for !position from 0 to 6
              span.generic-#{!position}
                :background= url("/images/harbor-generic-#{!position}.png")
            @for !position from 0 to 6
              span.bricks-#{!position}
                :background= url("/images/harbor-generic-#{!position}.png")
            @for !position from 0 to 6
              span.grain-#{!position}
                :background= url("/images/harbor-generic-#{!position}.png")
            @for !position from 0 to 6
              span.lumber-#{!position}
                :background= url("/images/harbor-generic-#{!position}.png")
            @for !position from 0 to 6
              span.ore-#{!position}
                :background= url("/images/harbor-generic-#{!position}.png")
            @for !position from 0 to 6
              span.wool-#{!position}
                :background= url("/images/harbor-generic-#{!position}.png")
            :list-style none
            @for !col from 0 to 11
              &.col-#{!col}
                :position absolute
                :top= !col * 40px
                :left= !col * 70px
            div
              :width= 95px
              :height= 80px
            &.forest
              :background url("/images/forest.png")
            &.hill
              :background url("/images/hill.png")
            &.mountain
              :background url("/images/mountain.png")
            &.pasture
              :background url("/images/pasture.png")
            &.field
              :background url("/images/field.png")
            &.sea
              :background url("/images/sea.png")
            &.desert
              :background url("/images/desert.png")
    div.nodes
      :position absolute
      li
        :list-style none
        @for !row from 0 to 11
          &.row-#{!row}
            :position absolute
            :top= !row * 80px
        ul
          li
            :width 24px
            :height 24px
            :z-index 2
            :list-style none
            &.settleable-1:hover
              :background url("/images/settlement-player-1.png")
            &.settleable-2:hover
              :background url("/images/settlement-player-2.png")
            &.settleable-3:hover
              :background url("/images/settlement-player-3.png")
            &.expandable-1:hover
              :background url("/images/city-player-1.png")
            &.expandable-2:hover
              :background url("/images/city-player-2.png")
            &.expandable-3:hover
              :background url("/images/city-player-3.png")
            @for !col from 0 to 23
              &.col-#{!col}
                :position absolute
                :top= floor((!col + 1) / 2) * 40px - 12px - 40px
                @if !col % 2 == 0
                  :left= floor(!col / 2) * 70px - 12px
                @else
                  :left= floor(!col / 2) * 70px - 12px + 25px
            &.settlement.player-1
              :background url("/images/settlement-player-1.png")
            &.settlement.player-2
              :background url("/images/settlement-player-2.png")
            &.settlement.player-3
              :background url("/images/settlement-player-3.png")
            &.city.player-1
              :background url("/images/city-player-1.png")
            &.city.player-2
              :background url("/images/city-player-2.png")
            &.city.player-3
              :background url("/images/city-player-3.png")
    div.edges
      :position absolute
      li
        :list-style none
        @for !row from 0 to 11
          &.row-#{!row}
            :position absolute
            :top= !row * 80px
        ul
          li
            :z-index 1
            :list-style none
            :width 48px
            :height 48px
            @for !col from 0 to 40
              &.col-#{!col}
                :position absolute
                @if !col % 3 == 0
                  :left= floor(!col / 3) * 70px - 24px - 58px
                  :top= floor(!col / 3) * 40px - 40px - 24px + 20px
                  &.settleable-1:hover
                    :background url("/images/road-0-player-1.png")
                  &.road.player-1
                    :background url("/images/road-0-player-1.png")
                  &.settleable-2:hover
                    :background url("/images/road-0-player-2.png")
                  &.road.player-2
                    :background url("/images/road-0-player-2.png")
                  &.settleable-3:hover
                    :background url("/images/road-0-player-3.png")
                  &.road.player-3
                    :background url("/images/road-0-player-3.png")
                @else
                  @if !col % 3 == 1
                    :left= floor(!col / 3) * 70px - 24px - 24px
                    :top= floor(!col / 3) * 40px - 40px - 24px
                    &.settleable-1:hover
                      :background url("/images/road-1-player-1.png")
                    &.road.player-1
                      :background url("/images/road-1-player-1.png")
                    &.settleable-2:hover
                      :background url("/images/road-1-player-2.png")
                    &.road.player-2
                      :background url("/images/road-1-player-2.png")
                    &.settleable-3:hover
                      :background url("/images/road-1-player-3.png")
                    &.road.player-3
                      :background url("/images/road-1-player-3.png")
                  @else
                    :left= floor(!col / 3) * 70px - 24px + 10px
                    :top= floor(!col / 3) * 40px - 40px - 24px + 20px
                    &.settleable-1:hover
                      :background url("/images/road-2-player-1.png")
                    &.road.player-1
                      :background url("/images/road-2-player-1.png")
                    &.settleable-2:hover
                      :background url("/images/road-2-player-2.png")
                    &.road.player-2
                      :background url("/images/road-2-player-2.png")
                    &.settleable-3:hover
                      :background url("/images/road-2-player-3.png")
                    &.road.player-3
                      :background url("/images/road-2-player-3.png")
