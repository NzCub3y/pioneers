/*
  Pioneers - web game based on the Settlers of Catan board game.

  Copyright (C) 2009 Jakub Ku≈∫ma <qoobaa@gmail.com>

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as
  published by the Free Software Foundation, either version 3 of the
  License, or (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU Affero General Public License for more details.

  You should have received a copy of the GNU Affero General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.

!map_hex_width = 95px
!map_hex_height = 80px
!map_hex_x_offset = 15px
!map_hex_y_offset = 10px
!map_max_width = 7
!map_max_height = 7
!map_node_width = 24px
!map_node_height = 24px
!map_edge_width = 48px
!map_edge_height = 48px

=map
  div#map
    :display block
    :float left
    :position relative
    :padding 50px
    :background url("/images/sea.png")
    @for !x from 1 to 11
      @for !y from 1 to 11
        &.size-#{!x + "-" + !y}
          :height= !x * 80px + !y * 40px - 40px
          :width= !y * 70px + 20px
    ul#hexes
      :position absolute
      li
        :list-style none
        :line-height= 80px
        :text-align center
        @for !x from 0 to 11
          &.x-#{!x}
            :position absolute
            :top= !x * 80px
        ul
          li
            :list-style none
            :width= 95px
            :height= 80px
            @for !y from 0 to 11
              &.y-#{!y}
                :position absolute
                :top= !y * 40px
                :left= !y * 70px
            &.forest
              :background url("/images/forest.png")
            &.hill
              :background url("/images/hill.png")
            &.mountain
              :background url("/images/mountain.png")
            &.pasture
              :background url("/images/pasture.png")
            &.field
              :background url("/images/field.png")
            &.sea
              :background url("/images/sea.png")
            &.desert
              :background url("/images/desert.png")
    ul#nodes
      :position absolute
      li
        :list-style none
        @for !x from 0 to 11
          &.x-#{!x}
            :position absolute
            :top= !x * 80px
        ul
          li
            :z-index 2
            :list-style none
            :width= 24px
            :height= 24px
            @for !y from 0 to 23
              &.y-#{!y}
                :position absolute
                :top= floor((!y + 1) / 2) * 40px - 12px - 40px
                @if !y % 2 == 0
                  :left= floor(!y / 2) * 70px - 12px
                @else
                  :left= floor(!y / 2) * 70px - 12px + 25px
            &.settlement.player-1
              :background url("/images/settlement-player-1.png")
            &.settlement.player-2
              :background url("/images/settlement-player-2.png")
            &.settlement.player-3
              :background url("/images/settlement-player-3.png")
            &.city.player-1
              :background url("/images/city-player-1.png")
            &.city.player-2
              :background url("/images/city-player-2.png")
            &.city.player-3
              :background url("/images/city-player-3.png")
    ul#edges
      :position absolute
      li
        :list-style none
        @for !x from 0 to 11
          &.x-#{!x}
            :position absolute
            :top= !x * 80px
        ul
          li
            :z-index 1
            :list-style none
            :width= 48px
            :height= 48px
            @for !y from 0 to 40
              &.y-#{!y}
                :position absolute
                @if !y % 3 == 0
                  :left= floor(!y / 3) * 70px - 24px - 58px
                  :top= floor(!y / 3) * 40px - 40px - 24px + 20px
                  &.road.player-1
                    :background url("/images/road-0-player-1.png")
                  &.road.player-2
                    :background url("/images/road-0-player-2.png")
                  &.road.player-3
                    :background url("/images/road-0-player-3.png")
                @else
                  @if !y % 3 == 1
                    :left= floor(!y / 3) * 70px - 24px - 24px
                    :top= floor(!y / 3) * 40px - 40px - 24px
                    &.road.player-1
                      :background url("/images/road-1-player-1.png")
                    &.road.player-2
                      :background url("/images/road-1-player-2.png")
                    &.road.player-3
                      :background url("/images/road-1-player-3.png")
                  @else
                    :left= floor(!y / 3) * 70px - 24px + 10px
                    :top= floor(!y / 3) * 40px - 40px - 24px + 20px
                    &.road.player-1
                      :background url("/images/road-2-player-1.png")
                    &.road.player-2
                      :background url("/images/road-2-player-2.png")
                    &.road.player-3
                      :background url("/images/road-2-player-3.png")
